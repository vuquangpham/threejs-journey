"use strict";(self.webpackChunkthreejs_journey=self.webpackChunkthreejs_journey||[]).push([[5531,7657,8508,1749,5349,5094,4272,7117],{5531:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var o=n(9477),a=n(9365),s=n(8243),d=n(1125),i=n.n(d),r=n(2227),c=n(5094),p=n(8508),h=n(4272),w=n(1749),l=n(7117),m=n(5349),y=n(7657);const u=new Audio(y),g=e=>{e.contact.getImpactVelocityAlongNormal()>1.5&&(u.volume=Math.random(),u.currentTime=0,u.play())},M=class{constructor(e){let{element:t}=e;this.element=t,this.init()}init(){const e=new(i().World);e.broadphase=new(i().SAPBroadphase)(e),e.allowSleep=!0,e.gravity.set(0,-9.82,0);const t=new(i().Material)("default"),n=new(i().ContactMaterial)(t,t,{friction:.1,restitution:.7});e.defaultContactMaterial=n;const d=new(i().Plane),y=new(i().Body)({shape:d});y.quaternion.setFromAxisAngle(new(i().Vec3)(1,0,0),-.5*Math.PI),e.addBody(y);const u=new s.ZP;o.epp.enabled=!1;const M=document.querySelector("canvas#webgl"),b=new o.xsS,x=(new o.dpR,(new o.cBK).load([c,p,h,w,l,m])),f=new o.Kj0(new o._12(10,10),new o.Wid({color:"#777",metalness:.3,roughness:.4,envMap:x,envMapIntensity:.5,side:o.ehD}));f.receiveShadow=!0,f.rotation.x=.5*-Math.PI,b.add(f);const v=new o.Mig(16777215,.9);b.add(v);const S=new o.Ox3(16777215,.2);S.castShadow=!0,S.shadow.mapSize.set(1024,1024),S.shadow.camera.far=15,S.shadow.camera.left=-7,S.shadow.camera.top=7,S.shadow.camera.right=7,S.shadow.camera.bottom=-7,S.position.set(5,5,5),b.add(S);const P={width:window.innerWidth,height:window.innerHeight},B=new o.cPb(75,P.width/P.height,.1,100);B.position.set(-3,3,3),b.add(B);const j=new a.z(B,M);j.enableDamping=!0;const z=new o.CP7({canvas:M});z.outputColorSpace=o.GUF,z.shadowMap.enabled=!0,z.shadowMap.type=o.ntZ,z.setSize(P.width,P.height),z.setPixelRatio(Math.min(window.devicePixelRatio,2));const A=new o.SUY;let C=0;new r.Z(b,e,{});const I=[],W=new o.xo$(1,20,20),q=new o.Wid({metalness:.3,roughness:.4,envMap:x,envMapIntensity:.5}),R={};R.createSphere=()=>{((n,a)=>{const s=new o.Kj0(W,q);s.scale.set(n,n,n),s.castShadow=!0,s.position.copy(a),b.add(s);const d=new(i().Sphere)(n),r=new(i().Body)({mass:1,position:new(i().Vec3)(0,3,0),shape:d,material:t});r.position.copy(a),e.addBody(r),r.addEventListener("collide",g),I.push({mesh:s,body:r})})(.5*Math.random(),{x:3*(Math.random()-.5),y:3,z:3*(Math.random()-.5)})},u.add(R,"createSphere");const V=new o.DvJ(1,1,1),k=new o.Wid({metalness:.3,roughness:.4,envMap:x,envMapIntensity:.5});R.createBox=()=>{((n,a,s,d)=>{const r=new o.Kj0(V,k);r.scale.set(n,a,s),r.castShadow=!0,r.position.copy(d),b.add(r);const c=new(i().Box)(new(i().Vec3)(.5*n,.5*a,.5*s)),p=new(i().Body)({mass:1,position:new(i().Vec3)(0,3,0),shape:c,material:t});p.position.copy(d),e.addBody(p),p.addEventListener("collide",g),I.push({mesh:r,body:p})})(Math.random(),Math.random(),Math.random(),{x:3*(Math.random()-.5),y:3,z:3*(Math.random()-.5)})},u.add(R,"createBox");const E=()=>{const t=A.getElapsedTime(),n=t-C;C=t,e.step(1/60,n,3);for(const e of I)e.mesh.position.copy(e.body.position),e.mesh.quaternion.copy(e.body.quaternion);j.update(),z.render(b,B),window.requestAnimationFrame(E)};E(),window.addEventListener("resize",(()=>{P.width=window.innerWidth,P.height=window.innerHeight,B.aspect=P.width/P.height,B.updateProjectionMatrix(),z.setSize(P.width,P.height),z.setPixelRatio(Math.min(window.devicePixelRatio,2))}))}destroy(){console.log("destroyed",this)}}},7657:(e,t,n)=>{e.exports=n.p+"3c1bbb362b35834da2ed..mp3"},8508:(e,t,n)=>{e.exports=n.p+"2fe65f1885d840f36484..png"},1749:(e,t,n)=>{e.exports=n.p+"a3803cfd81082caf8497..png"},5349:(e,t,n)=>{e.exports=n.p+"04241fac85a33ade9d2f..png"},5094:(e,t,n)=>{e.exports=n.p+"42e65508d387058feb81..png"},4272:(e,t,n)=>{e.exports=n.p+"bb8a2c51f8556bc94e42..png"},7117:(e,t,n)=>{e.exports=n.p+"abafe70924df5a450e6e..png"}}]);